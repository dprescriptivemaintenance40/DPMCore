



<p-toast position="top-center"></p-toast>

<div class="container-fluid">
    <h1 class="h3 mb-2 text-gray-800">Dashboard</h1>
    <div class="row">

        <div class="col-xl-8 col-lg-7">
            <div class="card shadow mb-4">
                <div style="color: #585570;" class="card-header py-3">
                    <h6 class="m-0 font-weight-bold">Illustrations</h6>
                </div>
                <div class="card-body">
                    <div class="text-center">
                        <img class="img-fluid px-3 px-sm-4 mt-3 mb-2" src="dist/DPM/assets/img/undraw_posting_photo.svg" alt="">
                    </div>
                    <p> <b>Dynamic Prescriptive Maintenance</b> <br> Conventional Maintenance practices are (1)Reactive, (2)Preventive, and (3)Predictive. <br> Organizations are gradually adopting Proactive maintenance practice. In the digital age, a new
                        maintenance practice is evolving, called Prescriptive. Dynamic Prescriptive Maintenance (D.P.M.) is the methodology that enables data capturing in near-real-time (dynamic); applies artificial intelligence to recognize pattern &
                        forecast future failure; and prescribes just-in-time maintenance tasks, to minimize business risk and maximize profitability.</p>
                    <a style="color:#585570;" href="https://linkedin.com/in/dynamic-prescriptive-maintenance-08bb101b8">Browse Illustrations on
                                LinkedIn &rarr;</a>
                </div>
            </div>
        </div>

        <div class="col-xl-4 col-lg-5">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 style="color: #585570;" class="m-0 font-weight-bold">DPM (Product Development Progress)</h6>
                </div>
                <div class="card-body">
                    <h4 class="small font-weight-bold">Compressor<span class="float-right">60%</span></h4>
                    <div class="progress">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 60%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                    </div> <br>

                    <h4 class="small font-weight-bold">Pumps Under Progress <span class="float-right">10%</span></h4>
                    <div class="progress mb-4">
                        <div class="progress-bar" role="progressbar" style="width: 10%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xl-12 col-lg-11">
            <div class="card prescriptive shadow mb-4 con" *ngIf="!(user.UserType == 3)">
                <div class="card-header">
                    <h6 style="color: #585570;" class="m-0 font-weight-bold " class="card-header-title font-size-lg text-capitalize font-weight-normal"><i class="fa fa-tasks"></i>&nbsp;Prescriptive Equipment List</h6>
                    <div class="col" *ngIf="Table2">
                        <button type="button" style="float: right" class="btn btn-secondary btn-sm" (click)="BackToTable1()">Back</button>
                                     
                    </div>
                </div>
                <div class="card-body">
                    <table style="text-align:center;" *ngIf="Table1" class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Assets</th>
                                <th scope="col">Sub Units</th>
                                <th scope="col">Tag No.</th>
                                <th scope="col">Tree Update</th>
                                <th scope="col">Consequence Update</th>
                                <th scope="col">Component Criticality Factor</th>
                                <th scope="col">Component Rating</th>
                                <th scope="col">Maintainenance Practice</th>
                                <th scope="col">Delete</th>
                            </tr>
                        </thead>
                        <tbody style="margin-right: 10px;">
                            <tr *ngIf="prescriptiveRecords.length == 0" >
                                <td style="text-align:center; margin-top: 20px;" colspan="10" >No Records to show</td>
                            </tr>

                            <tr *ngFor="let p of prescriptiveRecords; let i=index;">
                                <th scope="row">{{i+1}}</th>
                                <td (click)="FailureModeTable(p)" >{{p.MachineType}}</td>
                                <td (click)="FailureModeTable(p)">{{p.EquipmentType}}</td>
                                <td (click)="FailureModeTable(p)">{{p.TagNumber}}</td>
                                <td>
                                    <button type="button" class="btn btn-secondary btn-sm" (click)="UpdatePrescriptiveRecords(p)" [disabled]="p.FMWithConsequenceTree.length == 0" >Update</button>
                                </td>       
                                <td>
                                    <button type="button" class="btn btn-secondary btn-sm" (click)="ADDConsequenceRecords(p)" [disabled]="p.FMWithConsequenceTree.length > 0" >ADD Cons.</button>
                                </td>
                                <td (click)="FailureModeTable(p)" >{{p.ComponentCriticalityFactor}}</td>
                                <td (click)="FailureModeTable(p)">{{p.ComponentRating}}</td>
                                <td (click)="FailureModeTable(p)">{{p.CMaintainenancePractice}}</td>
                                <td>
                                    <button type="button" class="btn btn-secondary btn-sm" (click)="DeletePrescriptiveRecords(p)">Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table *ngIf="Table2" class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Failure Mode</th>
                                <th scope="col">Local Effect</th>
                                <th scope="col">System Effect</th>
                                <th scope="col">Criticality Factor</th>
                                <th scope="col">Rating</th>
                                <th scope="col">Maintainenance Practice</th>
                                <th scope="col">Frequency Maintainenance</th>
                                <th scope="col">Condition Monitoring</th>
                                <th scope="col">Consequence</th>
                            
                            </tr>
                        </thead>
                        <tbody style="margin-right: 10px;" (click)="BackToTable1()">
                            <tr *ngFor="let p of FailureModeDataTabe2; let i=index;">
                                <th scope="row">{{i+1}}</th>
                                <td>{{p.FunctionMode}}</td>
                                <td>{{p.LocalEffect}}</td>
                                <td>{{p.SystemEffect}}</td>
                                <td>{{p.CriticalityFactor}}</td>
                                <td>{{p.Rating}}</td>
                                <td>{{p.MaintainenancePractice}}</td>
                                <td>{{p.FrequencyMaintainenance}}</td>
                                <td>{{p.ConditionMonitoring}}</td>
                                <td>{{p.Consequence}}</td>
                                
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <!-- line Chart -->
        <div class="col-xl-8 col-lg-7">
            <div class="card shadow mb-4" *ngIf="!(user.UserType == 3)">
                <div class="card-header py-3">
                    <h6 style="color: #585570;" class="m-0 font-weight-bold ">{{CompressorType}} Real Time Line Chart</h6>
                    <form class="form-inline">
                        <div class="form-group mb-2">
                            <select [ngModelOptions]="{standalone: true}" (change)="SelectCompressorType()" class="form-select" [(ngModel)]="CompressorType" class="form-control" name="CompressorType">
                                 <option value="">Compressor Type</option>
                                 <option value="ScrewCompressor">Screw Compressor</option>
                                 <option value="ScrewCompressor2" disabled>Screw Compressor 2</option>                      
                             </select>
                        </div>
                        <div class="form-select" class="form-group mx-sm-3 mb-2">
                            <select [ngModelOptions]="{standalone: true}" (change)="TrainPredict()" [(ngModel)]="TrainPredictType" class="form-select" class="form-control" name="TrainAndPredictions">
                                  <option value="">Select Type</option>
                                  <option value="Train">Train</option>
                                  <option value="Prediction">Prediction</option>
                             </select>
                        </div>

                        <div class="form-group mx-sm-3 mb-2">
                            <select class="form-select" [ngModelOptions]="{standalone: true}" (change)="TrainPredict()" [(ngModel)]="SelectDateType" class="form-control" name="Date">
                               <option value="">Select date</option>
                               <option value="LastUpload">Last Upload</option>
                               <option value="PreviousWeek">Previous Week</option>
                               <option value="PreviousMonth">Previous Month</option>
                               <option value="TillFirstUpload">Till First Upload</option>  
                             </select>
                        </div>
                    </form>


                </div>
                <div class="card-body">
                    <div class="chart-real ">
                        <canvas id="RealContainer" width="600" height="400"></canvas>
                    </div>
                </div>


            </div>
            <div class="card shadow mb-4" *ngIf="!(user.UserType == 3)">
                <div class="card-header ">
                    <h6 style="color: #585570;" class="m-0 font-weight-bold ">{{CompressorType}} Line Chart</h6>
                </div>
                <div class="card-body">
                    <div class="chart-line">
                        <canvas id="LineContainer" width="600" height="400"></canvas>

                    </div>

                </div>
            </div>
        </div>
        <div class="col-xl-4 col-lg-5">
            <div class="card shadow mb-4" *ngIf="!(user.UserType == 3)">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3">
                    <h6 style="color: #585570;" class="m-0 font-weight-bold">Pie Chart</h6>
                </div>
                <!-- Card Body -->
                <div class="card-body">
                    <div class="chart-pie pt-4">
                        <canvas id="pie" width="400" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>